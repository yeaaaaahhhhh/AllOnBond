# 📝 작업 계획

## 개발 우선순위 및 마일스톤

### 🎯 Phase 0: 프로젝트 기반 구축 (1-2주)

#### P0-1: 개발 환경 설정
- [ ] **프로젝트 초기화**
  - Vite + React + TypeScript 스캐폴딩
  - ESLint, Prettier, Husky 설정
  - GitHub Repository 설정
- [ ] **UI 프레임워크 설정**
  - Tailwind CSS 설치 및 설정
  - shadcn/ui 컴포넌트 라이브러리 설치
  - 기본 레이아웃 컴포넌트 생성
- [ ] **배포 파이프라인**
  - GitHub Actions 워크플로우 생성
  - GitHub Pages 배포 설정
  - 도메인 연결 및 SSL 설정

#### P0-2: 핵심 계산 엔진
- [ ] **Bond Math 라이브러리**
  - 일수 계산 (ACT/365) 구현
  - 경과이자 계산 함수
  - 현금흐름 생성 로직
- [ ] **가격/수익률 계산**
  - 채권 가격 계산 (현재가치 합계)
  - YTM 계산 (뉴턴-랩슨 + 이분법)
  - 예금환산 수익률 변환
- [ ] **세금 계산 모듈**
  - 한국 개인투자자 한국채권 세금 계산
  - 한국 개인투자자 미국채권 세금 계산산
  - 세전/세후 수익률 비교

#### P0-3: 기본 계산기 UI
- [ ] **입력 폼 컴포넌트**
  - 채권 정보 입력 (ISIN, 만기일, 쿠폰율 등)
  - 가격/수익률 토글 입력
  - 원화/달러 통화 선택
  - 세전/세후 토글
- [ ] **결과 표시 컴포넌트**
  - 계산 결과 카드 레이아웃
  - 현금흐름 테이블
  - 수식 설명 툴팁
- [ ] **기본 검증 및 에러 처리**
  - 입력값 유효성 검사 (Zod)
  - 에러 메시지 표시
  - 로딩 상태 관리

**🎯 P0 완료 기준**: 기본 채권 계산기가 동작하고 GitHub Pages에 배포됨

---

### 🚀 Phase 1: 기능 확장 (2-3주)

#### P1-1: 고급 계산 기능
- [ ] **듀레이션 계산**
  - 맥컬레이 듀레이션
  - 수정듀레이션
  - 가격 민감도 분석
- [ ] **무이표채 지원**
  - 할인채 가격 계산
  - 단순수익률 vs 복리수익률
  - 세금 처리 차이점
- [ ] **환율 처리**
  - 실시간 환율 API 연동 (선택적)
  - 환율 변동 리스크 표시

#### P1-2: 사용자 경험 개선
- [ ] **계산 설명 페이지**
  - 수식 상세 설명
  - 단계별 계산 과정
  - 예시 데이터로 시연
- [ ] **결과 시각화**
  - 현금흐름 차트 (Recharts)
  - 세전/세후 수익률 비교
- [ ] **사용성 개선**
  - 입력값 자동 완성
  - 계산 히스토리 (로컬 스토리지)
  - 결과 공유 URL 생성

#### P1-3: 채권 비교 기능
- [ ] **데이터 구조 설계**
  - bonds.json 스키마 확정
  - 샘플 데이터 생성
  - 데이터 검증 로직
- [ ] **비교 테이블 UI**
  - TanStack Table 구현
  - 정렬/필터링 기능
  - 페이지네이션
- [ ] **검색 및 필터**
  - 채권명/ISIN 검색
  - 만기일/수익률 범위 필터
  - 발행기관별 필터

**🎯 P1 완료 기준**: 완전한 계산기 + 기본 비교 기능 + 설명 페이지

---

### 🔄 Phase 2: 자동화 및 데이터 수집 (3-4주)

#### P2-1: 크롤링 시스템 구축
- [ ] **크롤러 개발**
  - 고인사이더(goinsider.kr) 크롤러
  - 삼성증권 크롤러 (가능한 경우)
  - 에러 처리 및 재시도 로직
- [ ] **데이터 처리 파이프라인**
  - 원시 데이터 정제
  - 중복 제거 및 검증
  - 수익률 자동 계산
- [ ] **GitHub Actions 자동화**
  - 매일 정해진 시간 실행
  - 데이터 업데이트 커밋
  - 실패 시 알림 (Issue 생성)

#### P2-2: 데이터 품질 관리
- [ ] **데이터 검증**
  - 이상값 감지 및 플래그
  - 누락 데이터 처리
- [ ] **모니터링**
  - 수집 성공률 추적
  - 데이터 품질 메트릭
  - 사용자 피드백 수집

#### P2-3: 고급 비교 기능
- [ ] **실시간 데이터 표시**
  - 마지막 업데이트 시간 표시
  - 데이터 신선도 인디케이터
  - 수동 새로고침 버튼
- [ ] **고급 분석**
  - 수익률 분포 차트
  - 만기별/등급별 통계
  - 시장 트렌드 분석

**🎯 P2 완료 기준**: 자동 데이터 수집 + 실시간 채권 비교 서비스

---

### 🎨 Phase 3: 완성도 향상 (2-3주)

#### P3-1: 성능 최적화
- [ ] **프론트엔드 최적화**
  - 코드 스플리팅 (계산기/비교 탭)
  - 이미지 최적화
  - 번들 크기 최적화
- [ ] **계산 성능**
  - 복잡한 계산 메모이제이션
  - Web Worker 활용 (대량 계산)
  - 가상 스크롤링 (대량 데이터)
- [ ] **캐싱 전략**
  - Service Worker 구현
  - 오프라인 계산기 지원
  - 정적 자산 캐싱

#### P3-2: 접근성 및 SEO
- [ ] **SEO 최적화**
  - 메타 태그 최적화
  - Open Graph 설정
  - 구조화된 데이터 마크업

**🎯 P3 완료 기준**: 프로덕션 준비 완료된 서비스

---

## 상세 작업 분해

### 🔧 P0-1: 개발 환경 설정 (3-4일)

```bash
# Day 1: 프로젝트 초기화
- npm create vite@latest allonbond -- --template react-ts
- ESLint, Prettier 설정
- Husky pre-commit 훅 설정
- 기본 폴더 구조 생성

# Day 2: UI 프레임워크
- Tailwind CSS 설치 및 설정
- shadcn/ui 설치 및 기본 컴포넌트
- 브랜딩 컬러 팔레트 적용

# Day 3: GitHub 설정
- Repository 생성 및 초기 커밋
- GitHub Actions 워크플로우 작성
- GitHub Pages 설정

# Day 4: 기본 레이아웃
- Header, Footer 컴포넌트
- 탭 네비게이션 구현
- 반응형 레이아웃 테스트
```

### 🧮 P0-2: 핵심 계산 엔진 (5-7일)

```typescript
// Day 1-2: 기본 수학 함수
src/lib/
├── dayCount.ts          // ACT/365 일수 계산
├── dateUtils.ts         // 쿠폰 날짜 생성
└── mathUtils.ts         // 수치 계산 유틸리티

// Day 3-4: 채권 가격 계산
src/lib/
├── bondPricing.ts       // 가격 계산 로직
├── yieldCalculation.ts  // YTM 계산 (뉴턴-랩슨)
└── cashFlow.ts          // 현금흐름 생성

// Day 5-6: 세금 계산
src/lib/
├── taxKorea.ts          // 한국 세법
└── taxUtils.ts          // 공통 세금 유틸리티

// Day 7: 통합 테스트
src/lib/
└── __tests__/           // 단위 테스트
```

### 🎨 P0-3: 기본 UI 구현 (4-5일)

```typescript
// Day 1-2: 입력 컴포넌트
src/components/Calculator/
├── BondInputForm.tsx    // 메인 입력 폼
├── CurrencyToggle.tsx   // 통화 선택
├── TaxToggle.tsx        // 세전/세후 토글
└── ValidationMessage.tsx // 에러 메시지

// Day 3-4: 결과 표시
src/components/Calculator/
├── ResultDisplay.tsx    // 결과 카드
├── CashFlowTable.tsx    // 현금흐름 테이블
├── FormulaTooltip.tsx   // 수식 툴팁
└── MetricsCard.tsx      // 지표 카드

// Day 5: 통합 및 테스트
src/pages/
└── Calculator.tsx       // 메인 계산기 페이지
```

## 위험 요소 및 대응 방안

### 🚨 기술적 위험

1. **크롤링 차단**
   - **위험**: 대상 사이트의 봇 차단
   - **대응**: User-Agent 설정, 요청 간격 조절, 수동 데이터 입력 대체 방안

2. **수치 계산 정확성**
   - **위험**: 부동소수점 오차, 수렴 실패
   - **대응**: 다중 알고리즘 구현, 엣지 케이스 테스트, 금융 라이브러리 참조

3. **GitHub Pages 제약**
   - **위험**: 정적 호스팅 한계, 파일 크기 제한
   - **대응**: 데이터 압축, 청크 분할, CDN 활용

### 📋 일정 위험

1. **크롤링 개발 지연**
   - **대응**: 수동 데이터 입력으로 우선 구현, 크롤링은 후순위

2. **복잡한 세법 처리**
   - **대응**: 기본 세율만 우선 구현, 고급 세법은 Phase 3으로 연기

### 🔍 품질 보증

1. **단위 테스트**
   - 모든 계산 함수 테스트 커버리지 90% 이상
   - 알려진 채권 데이터로 검증

2. **통합 테스트**
   - 실제 시장 데이터로 계산 결과 검증
   - 다른 금융 계산기와 결과 비교

3. **사용자 테스트**
   - 금융 전문가 피드백 수집
   - 일반 사용자 사용성 테스트

## 성공 지표 (KPI)

### 📊 기능적 지표
- [ ] 계산 정확도: 시장 데이터 대비 오차 < 0.01%
- [ ] 응답 속도: 계산 결과 < 100ms
- [ ] 데이터 신선도: 일일 업데이트 성공률 > 95%

### 👥 사용자 지표
- [ ] 페이지 로딩 속도: LCP < 2.5초
- [ ] 접근성 점수: Lighthouse > 90점
- [ ] 모바일 호환성: 모든 주요 기기에서 정상 동작

### 🔧 개발 지표
- [ ] 코드 커버리지: > 80%
- [ ] 빌드 성공률: > 98%
- [ ] 배포 자동화: 완전 자동화

---

*이 작업 계획은 1인 개발자 기준으로 수립되었으며, 필요에 따라 우선순위를 조정할 수 있습니다.*
